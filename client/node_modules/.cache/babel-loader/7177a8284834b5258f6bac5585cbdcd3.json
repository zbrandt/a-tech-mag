{"ast":null,"code":"import _slicedToArray from\"C:/Users/zacha/OneDrive/Desktop/a-tech-mag/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{AppBar,Avatar,Typography,Toolbar,Button}from'@material-ui/core';import{useDispatch}from'react-redux';import*as JWT from'jwt-decode';import useStyles from'./styles';import atechmag from'../../images/tech mag.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var navigate=useNavigate();var location=useLocation();var logout=function logout(){dispatch({type:'LOGOUT'});navigate('/');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=JWT(token);if(decodedToken.exp*1000<new Date().getTime()){logout();}}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsxs(\"div\",{classesName:classes.brandContainer,children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Typography,{className:classes.heading,variant:\"h2\",align:\"center\",children:\"A Tech Mag\"})}),/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:atechmag,alt:\"atechmag\",height:\"60\"})]}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:user?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user.result.name,children:user.result.name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:user.result.name}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(Link,{to:\"/auth\",children:/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})})})]});};export default Navbar;","map":{"version":3,"sources":["C:/Users/zacha/OneDrive/Desktop/a-tech-mag/client/src/components/Navbar/Navbar.js"],"names":["React","useState","useEffect","Link","useNavigate","useLocation","AppBar","Avatar","Typography","Toolbar","Button","useDispatch","JWT","useStyles","atechmag","Navbar","classes","JSON","parse","localStorage","getItem","user","setUser","dispatch","navigate","location","logout","type","token","decodedToken","exp","Date","getTime","appBar","brandContainer","heading","image","toolbar","profile","purple","result","name","charAt","userName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { AppBar, Avatar, Typography, Toolbar, Button } from '@material-ui/core';\r\nimport { useDispatch } from 'react-redux';\r\nimport * as JWT from 'jwt-decode';\r\n\r\nimport useStyles from './styles';\r\nimport atechmag from '../../images/tech mag.png';\r\n\r\nconst Navbar = () => {\r\n    const classes = useStyles();\r\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    const logout = () => {\r\n        dispatch({ type: 'LOGOUT' });\r\n\r\n        navigate('/');\r\n\r\n        setUser(null);\r\n    }\r\n\r\n    useEffect(() => {\r\n        const token = user?.token;\r\n\r\n        if (token) {\r\n            const decodedToken = JWT(token);\r\n\r\n            if(decodedToken.exp * 1000 < new Date().getTime()) {\r\n                logout();\r\n            }\r\n        }\r\n\r\n        setUser(JSON.parse(localStorage.getItem('profile')));\r\n    }, [location])\r\n\r\n    return (\r\n        <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\r\n            <div classesName={classes.brandContainer}>\r\n                <Link to=\"/\"><Typography className={classes.heading} variant=\"h2\" align=\"center\">A Tech Mag</Typography></Link>\r\n                \r\n                <img className={classes.image} src={atechmag} alt=\"atechmag\" height=\"60\" />\r\n            </div>\r\n            <Toolbar className={classes.toolbar}>\r\n                {user ? (\r\n                    <div className={classes.profile}>\r\n                        <Avatar className={classes.purple} alt={user.result.name}>{user.result.name.charAt(0)}</Avatar>\r\n                        <Typography className={classes.userName} variant=\"h6\">{user.result.name}</Typography>\r\n                        <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logout}>Logout</Button>\r\n                    </div>\r\n                ) : (\r\n                    <Link to=\"/auth\"><Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button></Link>\r\n                )}\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\nexport default Navbar;"]},"metadata":{},"sourceType":"module"}